# ServerAPI
Мод-HTTP api для управления сервером.

**Основной язык**: Java

**Направление**:  плагин Sponge

**Версия**: 1.12.2

## Документация:
В каждом запросе в JSON должно быть как минимум два ключа:
* method - метод (см. ниже)
* args - аргументы к методу, если нужно. Если нет, оставлять пустым.

Структура ответа:
* response - ответ метода
* error - текст ошибки (если status code != 200)


Список методов:
* любой метод
    * 500 <текст ошибки> - при выполнении произошла ошибка
    * 400 - недостаточно аргументов к команде (если они нужны)
* command <команда (str)> [имя отправителя (str)] [группа на сервере (str)] - выполнить команду. Имя отправителя, если указано, заменит имя "ServerAPI" на указаную строку. Если указать группу, то команды будут выполнятся с правами этой группы, в противном случае, может быть выполнена абсолютно любая команда. Возвращаемый результат:
    * 200 <ответ от команды> (может быть пустым)
* players <public (bool в виде строки)> - получить список игроков. При public = true, игроки в ванише не будут появлятся в списке.
    * 200 <список игроков (str) (comma-delimited)>
* info - получить инофрмацию о сервере
    * 200 <JSON объект> (пример объедка: `{"playerCount": 228, "maxPlayers": 1488, "serverUptime": 99999999, "serverTPS": 20}`)
* scr <ник (str)> [quality (str) (low/high/grayscale) (default: low)] - получить скриншот игрока
    * 200 <base64 png>
    * 524 (превышено время ожидания ответа)
    * 404 (игрок не найден)
    * 400 (вместе с недостатком аргументов, этот код также может означать неверное качество)
    * 405 (скриншот не поддерживается на этом сервере)
* discord <ник> <сообщение> - пересылка сообщения из дискорда на сервер
    * 200
* eval <код> - выполнить JS код на стороне сервера
    * 200 <высер>
